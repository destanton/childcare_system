{% extends 'base.html' %}

{% block content %}
<div class="ui container">
  <table class="ui red table">
    {% if request.user.is_authenticated %}
    <h2 class="ui center aligned icon header">
  <i class="circular users icon"></i>
    Child Detail</h2>
  {% if request.user.profile.is_parent %}
  <h2 class="ui right aligned header">Total Bill {{request.user.profile.child_bill}}</h2>
    <thead>
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Pin</th>
        <th>Hours</th>
        <th>Billable Amount</th>
      </tr></thead><tbody>
        {% for child in request.user.profile.child_list %}
      <tr>
        <td>
          {{child.id}}
        </td>
        <td>
          {{child.first_name | title}}
          {{child.last_name | title}}
        </td>
        <td>
          {{child.pin}}
        </td>
        <td>
          {{child.total_time | floatformat:2}}
        </td>
        <td>
          {{child.total_bill}}
        </td>
      </tr>

    {% endfor %}

  </tbody>
    </table>
    <hr>
    <table class="ui red table">
    <thead>
      <tr>
        <th>Name</th>
        <th>Checked In</th>
        <th>Checked Out</th>
      </tr></thead><tbody>
    {% for child in request.user.profile.child_list %}
      {% for item in child.all_checkin %}
      <tr>
        <td>
          {{item.child | title}}
        </td>
        <td>
          {{item.check_in}}
        </td>
        <td>
          {{item.check_out}}
        </td>
      </tr>
    {% endfor %}
    {% endfor %}
  </tbody>
    </table>
    
    {% endif %}

  {% if request.user.profile.is_staff %}
  <table class="ui red table">
  <thead>
    <tr>
      <th>Parent</th>
      <th>Name</th>
      <th>Pin</th>
      <th>Total Hours</th>
      <th>Onsite</th>
      <th>Total Bill</th>
    </tr></thead><tbody>
  {% for child in child %}
  <tr>
    <td>
      {{ child.parent | title }}
    </td>
    <td>
      {{ child.first_name | title }}&nbsp;{{ child.last_name | title }}
    </td>
    <td>
      {{ child.pin }}
    </td>
    <td>
      {{ child.total_time | floatformat:2 }}
    </td>
    <td>
      {{ child.is_onsite }}
    </td>
    <td>
      {{ child.total_bill }}
    </td>
  </tr>
  {% endfor %}
</tbody>
  </table>
  {% endif %}

</div>
{% else %}
<h1>Please Login to View Profile</h1>
{% endif %}
{% endblock %}
str("{} {}").format('$', new_cost)
  Total Time Checked-In: {{item.get_time}}<br>
